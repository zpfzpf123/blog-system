# 网站状态监控功能说明

## 功能概述

网站合集页面新增了**网站状态监控**功能，实现定期检查各网站的可用性，并对失效链接进行自动标记。该功能提供了全面的网站健康状态监控，帮助用户及时发现和处理问题网站。

## 功能特性

### 1. 实时状态监控

- **自动检查**：支持定时自动检查网站状态
- **手动检查**：支持单个或批量手动检查
- **实时测试**：提供即时网站可用性测试

### 2. 多维度状态管理

- **状态分类**：正常(active)、异常(inactive)、失效(broken)、未知(unknown)
- **响应时间**：记录网站响应时间，评估性能
- **检查历史**：记录最后检查时间和结果

### 3. 智能监控配置

- **检查间隔**：支持5分钟到24小时的灵活配置
- **超时设置**：可配置的请求超时时间
- **重试机制**：支持失败重试，提高检查准确性

### 4. 可视化统计

- **状态统计卡片**：直观显示各状态网站数量
- **状态列表**：详细的网站状态信息表格
- **筛选搜索**：支持按状态和关键词筛选

## 使用方法

### 1. 打开状态监控

- 在网站合集页面点击"状态监控"按钮
- 系统自动加载所有网站的状态信息
- 显示状态统计和监控控制面板

### 2. 配置监控参数

- **检查间隔**：选择自动检查的时间间隔（5分钟-24小时）
- **超时时间**：设置单次检查的超时时间（5-60秒）
- **重试次数**：配置失败重试次数（1-5次）

### 3. 启动监控

- **手动检查**：点击"开始批量检查"进行一次性检查
- **自动监控**：点击"启动自动监控"开启定时检查
- **单个检查**：在状态列表中点击"检查"按钮检查特定网站

### 4. 查看结果

- **状态统计**：查看各状态网站的数量分布
- **详细列表**：浏览每个网站的具体状态信息
- **实时更新**：状态变化时自动刷新显示

## 状态说明

### 状态类型

- **正常(active)**：网站可正常访问，响应时间在合理范围内
- **异常(inactive)**：网站访问异常，响应时间过长或部分功能不可用
- **失效(broken)**：网站完全无法访问，返回错误状态
- **未知(unknown)**：尚未检查或检查失败的网站

### 状态判断标准

- **正常**：HTTP状态码200，响应时间 < 超时时间
- **异常**：HTTP状态码非200，或响应时间 > 超时时间
- **失效**：连接超时、DNS解析失败、服务器错误等
- **未知**：首次添加或检查过程中出现异常

## 技术实现

### 前端功能

- **Vue 3 + TypeScript**：现代化的前端框架
- **Element Plus**：丰富的UI组件库
- **实时更新**：响应式数据绑定和状态管理
- **定时器管理**：自动清理定时器，防止内存泄漏

### 后端支持

- **Spring Boot API**：提供状态检查接口
- **批量处理**：支持大量网站的状态检查
- **异步处理**：非阻塞的状态检查操作
- **结果缓存**：缓存检查结果，提高性能

### 检查机制

- **HTTP请求**：通过发送HTTP请求检查网站状态
- **超时控制**：可配置的请求超时时间
- **重试逻辑**：失败时的自动重试机制
- **状态更新**：实时更新网站状态和检查时间

## 监控配置

### 检查间隔选项

- 5分钟：适合需要实时监控的重要网站
- 15分钟：平衡性能和实时性的推荐设置
- 30分钟：适合一般网站的监控需求
- 1小时：适合稳定性较好的网站
- 6小时：适合低频率检查的网站
- 12小时：适合夜间维护时段
- 24小时：适合日常健康检查

### 超时时间设置

- **5秒**：快速检查，适合响应快的网站
- **10秒**：推荐设置，平衡速度和准确性
- **15秒**：适合响应较慢的网站
- **30秒**：适合网络环境较差的场景
- **60秒**：最大超时时间，适合特殊需求

### 重试机制

- **1次**：快速检查，减少等待时间
- **2次**：推荐设置，提高检查准确性
- **3次**：适合网络不稳定的环境
- **4-5次**：适合对准确性要求极高的场景

## 使用场景

### 1. 网站维护

- 及时发现失效链接
- 监控网站性能变化
- 评估网站稳定性

### 2. 服务质量保证

- 确保重要网站可用性
- 快速响应服务中断
- 维护用户体验

### 3. 数据分析

- 统计网站健康状态
- 分析失效原因
- 优化网站管理策略

### 4. 团队协作

- 统一监控标准
- 共享状态信息
- 协调维护工作

## 注意事项

### 性能考虑

- 大量网站时建议使用较长的检查间隔
- 避免过于频繁的检查请求
- 合理设置超时时间和重试次数

### 网络环境

- 不同网络环境下的检查结果可能不同
- 建议在稳定的网络环境下进行监控
- 考虑网络延迟对响应时间的影响

### 资源消耗

- 自动监控会消耗一定的系统资源
- 建议根据实际需求调整监控频率
- 定期检查监控日志和性能指标

## 常见问题

### Q: 为什么某些网站显示状态异常？

A: 可能的原因：

- 网络连接问题
- 网站服务器响应慢
- 防火墙或代理设置
- 网站临时维护

### Q: 如何提高检查准确性？

A: 建议：

- 适当增加重试次数
- 调整超时时间
- 选择合理的检查间隔
- 在稳定网络环境下检查

### Q: 自动监控会影响系统性能吗？

A: 影响很小：

- 检查请求是轻量级的
- 支持配置检查间隔
- 可以随时停止监控
- 系统会自动清理资源

## 更新日志

### v1.0.0 (2025-01-27)

- 新增网站状态监控功能
- 支持自动和手动状态检查
- 提供状态统计和可视化
- 支持监控参数配置
- 实现状态报告导出

## 技术支持

如有问题或建议，请：

1. 检查网络连接和API服务状态
2. 查看浏览器控制台错误信息
3. 确认监控参数设置是否合理
4. 联系开发团队获取支持
