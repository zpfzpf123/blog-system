# 博客系统云服务器部署使用说明

## 概述

我已经为您的博客系统创建了完整的云服务器部署方案，支持多种免费云平台，包括Railway、Render和Vercel。

## 已创建的文件

### 1. 部署配置文件

- `railway.json` - Railway部署配置
- `render.yaml` - Render部署配置
- `frontend-railway.json` - 前端Railway配置
- `frontend-nixpacks.toml` - 前端构建配置

### 2. 后端配置文件

- `backend-spring/src/main/resources/application-prod.properties` - 生产环境配置
- `backend-spring/src/main/resources/application-postgresql.properties` - PostgreSQL配置
- `backend-spring/src/main/java/com/blog/controller/HealthController.java` - 健康检查
- `backend-spring/src/main/java/com/blog/config/CorsConfig.java` - CORS配置
- `backend-spring/nixpacks.toml` - 后端构建配置

### 3. 前端配置文件

- `vite.config.prod.ts` - 生产环境Vite配置
- `env.production` - 生产环境变量
- `src/utils/axios.ts` - 更新的API配置

### 4. 部署脚本

- `deploy.sh` - Linux/Mac一键部署脚本
- `deploy.bat` - Windows一键部署脚本
- `deploy-scripts/deploy-to-railway.sh` - Railway部署脚本
- `deploy-scripts/deploy-to-render.sh` - Render部署脚本

### 5. 数据库脚本

- `database-migration/init-database.sql` - 数据库初始化脚本

### 6. 文档

- `deployment-guide.md` - 详细部署指南
- `README-DEPLOYMENT.md` - 部署说明文档
- `deploy-scripts/quick-deploy.md` - 快速部署指南
- `DEPLOYMENT_CHECKLIST.md` - 部署检查清单

## 使用方法

### Windows用户

1. **使用批处理文件部署**

   ```cmd
   # 双击运行
   deploy.bat
   ```

2. **手动部署**
   - 按照 `deployment-guide.md` 中的步骤操作
   - 使用 `DEPLOYMENT_CHECKLIST.md` 检查清单

### Linux/Mac用户

1. **使用Shell脚本部署**

   ```bash
   # 添加执行权限
   chmod +x deploy.sh

   # 运行部署脚本
   ./deploy.sh
   ```

2. **使用特定平台脚本**
   ```bash
   chmod +x deploy-scripts/deploy-to-railway.sh
   ./deploy-scripts/deploy-to-railway.sh
   ```

## 部署方案选择

### 方案一：Railway全栈部署（推荐）

- **优点**: 简单易用，免费额度充足，自动SSL
- **适用**: 快速部署，全栈应用
- **步骤**: 按照 `deploy-scripts/quick-deploy.md` 操作

### 方案二：Render部署

- **优点**: 免费额度更大，支持PostgreSQL
- **适用**: 需要更大免费额度的项目
- **步骤**: 使用 `render.yaml` 配置文件

### 方案三：Vercel + Railway分离部署

- **优点**: 前端性能更好，后端稳定
- **适用**: 对前端性能要求高的项目
- **步骤**: 前端部署到Vercel，后端部署到Railway

## 环境要求

### 必需软件

- Git (版本控制)
- Node.js (>= 20.19.0)
- Java (>= 8)
- Maven (构建工具)

### 平台账号

- GitHub账号
- Railway账号 (如使用Railway)
- Render账号 (如使用Render)
- Vercel账号 (如使用Vercel)

## 部署步骤概览

### 1. 准备工作

1. 确保代码已推送到GitHub
2. 注册相应的云平台账号
3. 检查本地环境

### 2. 选择部署方案

1. 根据需求选择合适的平台
2. 按照对应指南操作
3. 配置环境变量

### 3. 部署验证

1. 检查服务状态
2. 测试功能
3. 验证性能

## 常见问题解决

### 构建失败

- 检查Node.js和Java版本
- 确认依赖包安装
- 查看构建日志

### 数据库连接失败

- 检查连接字符串
- 确认数据库服务状态
- 验证用户权限

### CORS错误

- 检查后端CORS配置
- 确认前端API地址
- 验证域名配置

## 维护建议

### 日常维护

- 定期检查服务状态
- 监控资源使用情况
- 更新依赖包
- 备份重要数据

### 更新部署

- 推送代码到GitHub
- 平台自动重新部署
- 验证新版本功能

## 成本控制

### 免费额度

- Railway: 每月500小时
- Render: 每月750小时
- Vercel: 无限制

### 优化建议

- 合理使用资源
- 监控使用情况
- 及时清理无用服务

## 技术支持

### 文档资源

- 各平台官方文档
- 项目README文件
- 部署指南文档

### 获取帮助

- 查看错误日志
- 检查配置文档
- 参考常见问题

## 下一步操作

1. **选择部署方案**: 根据您的需求选择合适的平台
2. **准备环境**: 确保所有必需软件已安装
3. **开始部署**: 按照对应指南执行部署
4. **验证功能**: 测试所有功能是否正常
5. **配置域名**: 设置自定义域名（可选）
6. **监控维护**: 定期检查服务状态

## 注意事项

1. **免费额度**: 注意各平台的免费额度限制
2. **数据备份**: 定期备份重要数据
3. **安全配置**: 确保敏感信息安全
4. **性能优化**: 根据需要进行性能优化
5. **版本管理**: 保持代码版本管理

---

**祝您部署顺利！如有问题，请参考相关文档或联系技术支持。**
