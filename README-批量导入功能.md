# 网站合集批量导入功能说明

## 功能概述

网站合集页面新增了**批量导入**功能，支持多种方式批量导入网站数据，特别针对从浏览器书签进行批量导入操作进行了优化。

## 功能特性

### 1. 多种导入方式

- **浏览器书签导入**：支持从浏览器导出的HTML书签文件导入
- **文件上传导入**：支持CSV、JSON、HTML等格式文件
- **手动输入导入**：支持手动输入网站信息

### 2. 智能解析

- 自动识别和解析不同格式的数据
- 支持多种字段映射（name/title, url/link, description/desc等）
- 自动验证URL格式和有效性

### 3. 导入预览

- 实时预览解析结果
- 显示导入统计信息
- 错误提示和验证

### 4. 批量处理

- 一次性导入多个网站
- 支持分类关联
- 导入结果反馈

## 使用方法

### 浏览器书签导入

1. **导出书签文件**
   - 在浏览器中按 `Ctrl+Shift+O`（Windows）或 `Cmd+Shift+O`（Mac）打开书签管理器
   - 选择要导出的书签文件夹
   - 右键选择"导出书签"或"导出到HTML文件"

2. **上传书签文件**
   - 点击"批量导入"按钮
   - 选择"浏览器书签"导入方式
   - 将导出的HTML文件拖拽到上传区域，或点击选择文件

3. **预览和导入**
   - 系统自动解析书签文件
   - 预览解析结果
   - 点击"开始导入"完成批量导入

### 文件上传导入

支持以下文件格式：

#### CSV格式

```csv
name,url,description,categoryIds
GitHub,https://github.com,代码托管平台,1,2
Stack Overflow,https://stackoverflow.com,程序员问答社区,1
Google,https://www.google.com,搜索引擎,
```

#### JSON格式

```json
[
  {
    "name": "GitHub",
    "url": "https://github.com",
    "description": "代码托管平台",
    "categoryIds": [1, 2]
  },
  {
    "name": "Stack Overflow",
    "url": "https://stackoverflow.com",
    "description": "程序员问答社区",
    "categoryIds": [1]
  }
]
```

#### HTML格式

支持浏览器导出的书签HTML文件，系统会自动解析其中的链接信息。

### 手动输入导入

1. **选择"手动输入"导入方式**
2. **按格式输入网站信息**：
   ```
   网站名称 | URL | 描述 | 分类（可选）
   ```
3. **示例**：
   ```
   GitHub | https://github.com | 代码托管平台 | 开发工具
   Stack Overflow | https://stackoverflow.com | 程序员问答社区 | 学习资源
   Google | https://www.google.com | 搜索引擎
   ```
4. **系统自动解析**：输入完成后1秒自动解析，或点击"解析输入"按钮

## 技术实现

### 前端功能

- Vue 3 + TypeScript
- Element Plus UI组件库
- 文件拖拽上传
- 实时预览和验证

### 后端支持

- Spring Boot REST API
- 批量导入接口：`POST /api/websites/import`
- 支持事务处理
- 错误处理和反馈

### 数据解析

- **HTML解析**：使用DOMParser解析书签HTML
- **JSON解析**：支持多种数据结构格式
- **CSV解析**：自动识别列标题和数据类型
- **手动输入解析**：支持分隔符分割的文本格式

## 注意事项

### 数据格式要求

- URL必须以 `http://` 或 `https://` 开头
- 网站名称不能为空
- 分类ID必须是有效的数字

### 导入限制

- 单次导入建议不超过1000个网站
- 大文件建议分批导入
- 支持的文件大小限制：10MB

### 错误处理

- 无效的URL会被标记为错误
- 格式不正确的行会显示具体错误信息
- 导入失败的项目会记录详细错误原因

## 使用场景

### 1. 浏览器书签迁移

- 从旧浏览器迁移书签到新系统
- 整理和分类现有书签
- 备份重要网站资源

### 2. 团队协作

- 批量导入团队共享的网站资源
- 统一管理项目相关网站
- 快速建立知识库

### 3. 数据备份和恢复

- 导出网站数据备份
- 系统迁移时批量导入
- 数据同步和更新

## 常见问题

### Q: 为什么某些书签导入失败？

A: 可能的原因：

- URL格式不正确（缺少http/https协议）
- 书签文件损坏或格式不支持
- 网络连接问题

### Q: 如何批量设置分类？

A: 可以通过以下方式：

- 在CSV/JSON文件中指定categoryIds字段
- 在手动输入中使用分类名称（系统自动匹配）
- 导入后通过批量编辑功能统一设置

### Q: 导入后如何验证数据？

A: 导入完成后：

- 系统会显示导入统计信息
- 可以查看网站列表确认数据
- 支持搜索和筛选功能

## 更新日志

### v1.0.0 (2025-01-27)

- 新增批量导入功能
- 支持浏览器书签HTML导入
- 支持CSV、JSON文件导入
- 支持手动输入导入
- 实时预览和验证
- 错误处理和反馈

## 技术支持

如有问题或建议，请：

1. 查看浏览器控制台错误信息
2. 检查导入文件格式是否正确
3. 确认网络连接和API服务状态
4. 联系开发团队获取支持
