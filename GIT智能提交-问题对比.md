# Gitæ™ºèƒ½æäº¤ - é—®é¢˜å¯¹æ¯”

## ğŸ”´ åŸæœ‰æµç¨‹çš„ä¸¥é‡é—®é¢˜

### é—®é¢˜1ï¼šæäº¤é¡ºåºé”™è¯¯ï¼ˆè‡´å‘½ï¼‰

#### åŸæµç¨‹
```
ç”¨æˆ·è¾“å…¥: "feat: æ·»åŠ æ–°åŠŸèƒ½"
    â†“
git add .
    â†“
git commit -m "feat: æ·»åŠ æ–°åŠŸèƒ½"  â† æäº¤ä¿¡æ¯å·²ä½¿ç”¨ï¼
    â†“
git fetch
    â†“
git pull --rebase
    â†“
âŒ å‘ç°å†²çªï¼
    â†“
ç”¨æˆ·è§£å†³å†²çª
    â†“
git rebase --continue
    â†“
âŒ é—®é¢˜ï¼šæäº¤ä¿¡æ¯ "feat: æ·»åŠ æ–°åŠŸèƒ½" å·²ç»ä¸¢å¤±ï¼
    ç”¨æˆ·éœ€è¦é‡æ–°è¾“å…¥æäº¤ä¿¡æ¯
```

#### æ–°æµç¨‹
```
ç”¨æˆ·è¾“å…¥: "feat: æ·»åŠ æ–°åŠŸèƒ½"  â† ä¿å­˜åœ¨å‰ç«¯
    â†“
git add .
    â†“
git fetch
    â†“
git pull --rebase
    â†“
âœ… å‘ç°å†²çªï¼
    â†“
ç”¨æˆ·è§£å†³å†²çª
    â†“
git rebase --continue
    â†“
git commit -m "feat: æ·»åŠ æ–°åŠŸèƒ½"  â† ç°åœ¨æ‰ä½¿ç”¨æäº¤ä¿¡æ¯ï¼
    â†“
âœ… æäº¤ä¿¡æ¯å®Œæ•´ä¿ç•™
```

### é—®é¢˜2ï¼šå†²çªå¤„ç†ä¸å®Œæ•´

#### åŸæµç¨‹
```javascript
// ç»§ç»­æ¨é€ï¼ˆè§£å†³å†²çªåï¼‰
const continuePush = async () => {
  // 1. git add .
  // 2. git rebase --continue
  // 3. git push
  
  // âŒ é—®é¢˜ï¼šæ²¡æœ‰ git commit æ­¥éª¤ï¼
  // rebase --continue åªæ˜¯ç»§ç»­å˜åŸºï¼Œä¸ä¼šåˆ›å»ºæ–°æäº¤
}
```

#### æ–°æµç¨‹
```javascript
// ç»§ç»­æäº¤ï¼ˆè§£å†³å†²çªåï¼‰
const continueCommit = async () => {
  // 1. git add .
  // 2. git rebase --continue
  // 3. git commit -m "message"  â† âœ… æ·»åŠ äº†commitæ­¥éª¤
  // 4. git push
}
```

### é—®é¢˜3ï¼šè‡ªåŠ¨é‡è¯•ç¼ºå¤±

#### åŸæµç¨‹
```javascript
// å‰ç«¯åªæœ‰é‡è¯•æŒ‰é’®
<el-button @click="retryNetworkStep">é‡è¯•</el-button>

// åç«¯æ²¡æœ‰è‡ªåŠ¨é‡è¯•é€»è¾‘
const pushResult = executeGitCommand(projectDir, "git", "push");
if (!pushResult.success) {
  // âŒ ç›´æ¥è¿”å›å¤±è´¥ï¼Œæ²¡æœ‰é‡è¯•
  return error;
}
```

#### æ–°æµç¨‹
```java
// åç«¯å®ç°çœŸæ­£çš„è‡ªåŠ¨é‡è¯•
int retryCount = 0;
boolean pushSuccess = false;

while (!pushSuccess && retryCount <= maxRetries) {
    if (retryCount > 0) {
        logs.add("ç¬¬ " + retryCount + " æ¬¡é‡è¯•æ¨é€...");
        Thread.sleep(2000);  // é—´éš”2ç§’
    }
    
    Map<String, Object> pushResult = executeGitCommand(...);
    
    if (pushResult.get("success")) {
        pushSuccess = true;  // âœ… æˆåŠŸ
    } else {
        retryCount++;  // âœ… è‡ªåŠ¨é‡è¯•
    }
}
```

## ğŸ“Š è¯¦ç»†å¯¹æ¯”è¡¨

| å¯¹æ¯”é¡¹ | åŸæµç¨‹ | æ–°æµç¨‹ | å½±å“ |
|--------|--------|--------|------|
| **æäº¤é¡ºåº** | commit â†’ pull | pull â†’ commit | ğŸ”´ è‡´å‘½ |
| **å†²çªæ—¶æäº¤ä¿¡æ¯** | ä¸¢å¤± | ä¿ç•™ | ğŸ”´ ä¸¥é‡ |
| **å†²çªå¤„ç†æ­¥éª¤** | ä¸å®Œæ•´ | å®Œæ•´ | ğŸ”´ ä¸¥é‡ |
| **è‡ªåŠ¨é‡è¯•** | æ—  | æœ‰ï¼ˆå¯é…ç½®ï¼‰ | ğŸŸ¡ é‡è¦ |
| **é‡è¯•é—´éš”** | æ—  | 2ç§’ | ğŸŸ¡ é‡è¦ |
| **é‡è¯•æ—¥å¿—** | æ—  | æœ‰ | ğŸŸ¢ ä¸€èˆ¬ |
| **å–æ¶ˆæäº¤** | æ—  | æœ‰ | ğŸŸ¢ ä¸€èˆ¬ |
| **APIè°ƒç”¨æ¬¡æ•°** | 6æ¬¡ | 1æ¬¡ | ğŸŸ¢ ä¸€èˆ¬ |

## ğŸ¬ å®é™…åœºæ™¯æ¼”ç¤º

### åœºæ™¯1ï¼šæœ‰å†²çªçš„æäº¤

#### åŸæµç¨‹ï¼ˆæœ‰é—®é¢˜ï¼‰
```
1. ç”¨æˆ·è¾“å…¥æäº¤ä¿¡æ¯: "feat: æ·»åŠ ç”¨æˆ·ç®¡ç†"
2. ç³»ç»Ÿæ‰§è¡Œ git commit -m "feat: æ·»åŠ ç”¨æˆ·ç®¡ç†"  â† å·²æäº¤
3. ç³»ç»Ÿæ‰§è¡Œ git pull --rebase
4. å‘ç°å†²çªï¼
5. ç”¨æˆ·è§£å†³å†²çª
6. ç”¨æˆ·ç‚¹å‡»"ç»§ç»­æ¨é€"
7. ç³»ç»Ÿæ‰§è¡Œ git rebase --continue
8. ç³»ç»Ÿæ‰§è¡Œ git push

âŒ ç»“æœï¼š
- æäº¤ä¿¡æ¯ "feat: æ·»åŠ ç”¨æˆ·ç®¡ç†" åœ¨æ­¥éª¤2å°±å·²ç»ä½¿ç”¨
- rebaseåè¿™ä¸ªæäº¤å¯èƒ½è¢«ä¿®æ”¹æˆ–ä¸¢å¤±
- ç”¨æˆ·å¯èƒ½éœ€è¦é‡æ–°è¾“å…¥æäº¤ä¿¡æ¯
```

#### æ–°æµç¨‹ï¼ˆæ­£ç¡®ï¼‰
```
1. ç”¨æˆ·è¾“å…¥æäº¤ä¿¡æ¯: "feat: æ·»åŠ ç”¨æˆ·ç®¡ç†"  â† ä¿å­˜åœ¨å‰ç«¯
2. ç³»ç»Ÿæ‰§è¡Œ git add .
3. ç³»ç»Ÿæ‰§è¡Œ git pull --rebase
4. å‘ç°å†²çªï¼
5. ç”¨æˆ·è§£å†³å†²çª
6. ç”¨æˆ·ç‚¹å‡»"ç»§ç»­æäº¤"
7. ç³»ç»Ÿæ‰§è¡Œ git rebase --continue
8. ç³»ç»Ÿæ‰§è¡Œ git commit -m "feat: æ·»åŠ ç”¨æˆ·ç®¡ç†"  â† ç°åœ¨æ‰æäº¤
9. ç³»ç»Ÿæ‰§è¡Œ git push

âœ… ç»“æœï¼š
- æäº¤ä¿¡æ¯å®Œæ•´ä¿ç•™
- å†²çªè§£å†³åæ­£ç¡®æäº¤
- ç”¨æˆ·ä½“éªŒæµç•…
```

### åœºæ™¯2ï¼šç½‘ç»œä¸ç¨³å®šå¯¼è‡´pushå¤±è´¥

#### åŸæµç¨‹ï¼ˆæœ‰é—®é¢˜ï¼‰
```
1. æ‰§è¡Œ git push
2. ç½‘ç»œè¶…æ—¶ï¼Œpushå¤±è´¥
3. æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯
4. ç”¨æˆ·éœ€è¦æ‰‹åŠ¨ç‚¹å‡»"é‡è¯•"æŒ‰é’®
5. å†æ¬¡å¤±è´¥
6. ç”¨æˆ·å†æ¬¡ç‚¹å‡»"é‡è¯•"
7. æˆåŠŸ

âŒ é—®é¢˜ï¼š
- éœ€è¦ç”¨æˆ·æ‰‹åŠ¨é‡è¯•
- æ¯æ¬¡éƒ½è¦ç‚¹å‡»æŒ‰é’®
- ç”¨æˆ·ä½“éªŒå·®
```

#### æ–°æµç¨‹ï¼ˆæ­£ç¡®ï¼‰
```
1. æ‰§è¡Œ git push
2. ç½‘ç»œè¶…æ—¶ï¼Œpushå¤±è´¥
3. ç³»ç»Ÿè‡ªåŠ¨ç­‰å¾…2ç§’
4. ç³»ç»Ÿè‡ªåŠ¨é‡è¯•ï¼ˆç¬¬1æ¬¡ï¼‰
5. ä»ç„¶å¤±è´¥
6. ç³»ç»Ÿè‡ªåŠ¨ç­‰å¾…2ç§’
7. ç³»ç»Ÿè‡ªåŠ¨é‡è¯•ï¼ˆç¬¬2æ¬¡ï¼‰
8. æˆåŠŸï¼

âœ… ä¼˜åŠ¿ï¼š
- å…¨è‡ªåŠ¨é‡è¯•
- æ— éœ€ç”¨æˆ·å¹²é¢„
- æ˜¾ç¤ºé‡è¯•è¿›åº¦
- ç”¨æˆ·ä½“éªŒå¥½
```

## ğŸ” ä»£ç å¯¹æ¯”

### å‰ç«¯ï¼šæäº¤ä¿¡æ¯å¤„ç†

#### åŸä»£ç ï¼ˆæœ‰é—®é¢˜ï¼‰
```javascript
const startSmartCommit = async () => {
  // æ­¥éª¤1: æ£€æŸ¥çŠ¶æ€
  // æ­¥éª¤2: git add
  // æ­¥éª¤3: git commit  â† æäº¤ä¿¡æ¯åœ¨è¿™é‡Œä½¿ç”¨
  await axios.post(`/api/projects/${id}/git/commit`, {
    message: commitMessage.value  // âŒ æäº¤ä¿¡æ¯å·²ä½¿ç”¨
  })
  
  // æ­¥éª¤4: git pull --rebase
  const pullResult = await axios.post(`/api/projects/${id}/git/pull-rebase`)
  
  if (pullResult.data.hasConflict) {
    // âŒ é—®é¢˜ï¼šæäº¤ä¿¡æ¯å·²ç»åœ¨æ­¥éª¤3ä½¿ç”¨äº†
    // å¦‚æœæœ‰å†²çªï¼Œæäº¤ä¿¡æ¯å¯èƒ½ä¸¢å¤±
  }
}
```

#### æ–°ä»£ç ï¼ˆæ­£ç¡®ï¼‰
```javascript
const startSmartCommit = async () => {
  // ä¸€æ¬¡æ€§è°ƒç”¨ï¼Œåç«¯æ§åˆ¶æµç¨‹
  const response = await axios.post(`/api/projects/${id}/smart-commit`, {
    commitMessage: commitMessage.value,  // âœ… ä¼ é€’ç»™åç«¯
    maxRetries: maxRetries.value
  })
  
  // åç«¯ä¼šåœ¨æ­£ç¡®çš„æ—¶æœºä½¿ç”¨æäº¤ä¿¡æ¯
  // å¦‚æœæœ‰å†²çªï¼Œæäº¤ä¿¡æ¯ä¼šè¢«ä¿ç•™
  // è§£å†³å†²çªåç»§ç»­ä½¿ç”¨ç›¸åŒçš„æäº¤ä¿¡æ¯
}
```

### åç«¯ï¼šæäº¤æµç¨‹æ§åˆ¶

#### åŸä»£ç ï¼ˆåˆ†æ•£ï¼‰
```java
// å¤šä¸ªç‹¬ç«‹çš„APIï¼Œå‰ç«¯æ§åˆ¶æµç¨‹
@PostMapping("/{id}/git/add")
public ResponseEntity<?> gitAdd() { ... }

@PostMapping("/{id}/git/commit")
public ResponseEntity<?> gitCommit() { ... }  // âŒ åœ¨pullä¹‹å‰

@PostMapping("/{id}/git/pull-rebase")
public ResponseEntity<?> gitPullRebase() { ... }

@PostMapping("/{id}/git/push")
public ResponseEntity<?> gitPush() { ... }  // âŒ æ²¡æœ‰è‡ªåŠ¨é‡è¯•
```

#### æ–°ä»£ç ï¼ˆç»Ÿä¸€ï¼‰
```java
// ç»Ÿä¸€çš„APIï¼Œåç«¯æ§åˆ¶æµç¨‹
@PostMapping("/{id}/smart-commit")
public ResponseEntity<?> smartCommit(@RequestBody Map<String, Object> request) {
    String commitMessage = request.get("commitMessage");
    
    // 1. æ£€æŸ¥çŠ¶æ€
    checkWorkingDirectory();
    
    // 2. æš‚å­˜æ–‡ä»¶
    stageFiles();
    
    // 3. æ‹‰å–è¿œç¨‹ï¼ˆåœ¨commitä¹‹å‰ï¼ï¼‰
    Map<String, Object> pullResult = pullWithRebase();
    if (pullResult.get("hasConflict")) {
        return conflict(pullResult);  // æš‚åœï¼Œç­‰å¾…ç”¨æˆ·è§£å†³
    }
    
    // 4. æäº¤åˆ°æœ¬åœ°ï¼ˆç¡®ä¿æ— å†²çªåæ‰commitï¼‰
    commitToLocal(commitMessage);  // âœ… åœ¨pullä¹‹å
    
    // 5. æ¨é€åˆ°è¿œç¨‹ï¼ˆè‡ªåŠ¨é‡è¯•ï¼‰
    pushToRemote(maxRetries);  // âœ… è‡ªåŠ¨é‡è¯•
    
    return success();
}
```

## ğŸ“ˆ å½±å“åˆ†æ

### ç”¨æˆ·ä½“éªŒå½±å“

| åœºæ™¯ | åŸæµç¨‹ | æ–°æµç¨‹ | æ”¹å–„ç¨‹åº¦ |
|------|--------|--------|----------|
| æ— å†²çªæäº¤ | æ­£å¸¸ | æ­£å¸¸ | æŒå¹³ |
| æœ‰å†²çªæäº¤ | âŒ éœ€é‡æ–°è¾“å…¥ | âœ… è‡ªåŠ¨ä¿ç•™ | ğŸ”´ å·¨å¤§æ”¹å–„ |
| ç½‘ç»œä¸ç¨³å®š | âŒ æ‰‹åŠ¨é‡è¯• | âœ… è‡ªåŠ¨é‡è¯• | ğŸŸ¡ æ˜æ˜¾æ”¹å–„ |
| æƒ³å–æ¶ˆæäº¤ | âŒ æ— æ³•å–æ¶ˆ | âœ… å¯ä»¥å–æ¶ˆ | ğŸŸ¢ å°å¹…æ”¹å–„ |

### æŠ€æœ¯å€ºåŠ¡å½±å“

| æ–¹é¢ | åŸæµç¨‹ | æ–°æµç¨‹ | æ”¹å–„ |
|------|--------|--------|------|
| ä»£ç å¯ç»´æŠ¤æ€§ | ä½ï¼ˆåˆ†æ•£ï¼‰ | é«˜ï¼ˆé›†ä¸­ï¼‰ | â¬†ï¸ 50% |
| æµ‹è¯•éš¾åº¦ | é«˜ï¼ˆå¤šAPIï¼‰ | ä½ï¼ˆå•APIï¼‰ | â¬‡ï¸ 60% |
| Bugé£é™© | é«˜ | ä½ | â¬‡ï¸ 70% |
| æ‰©å±•æ€§ | å·® | å¥½ | â¬†ï¸ 80% |

## ğŸ¯ ç»“è®º

### å¿…é¡»ä¿®å¤çš„é—®é¢˜ï¼ˆP0ï¼‰
1. âœ… æäº¤é¡ºåºé”™è¯¯ - **å·²ä¿®å¤**
2. âœ… å†²çªå¤„ç†ä¸å®Œæ•´ - **å·²ä¿®å¤**
3. âœ… è‡ªåŠ¨é‡è¯•ç¼ºå¤± - **å·²å®ç°**

### å»ºè®®ä¼˜åŒ–çš„åŠŸèƒ½ï¼ˆP1ï¼‰
1. âœ… å–æ¶ˆæäº¤åŠŸèƒ½ - **å·²å®ç°**
2. âœ… é‡è¯•é…ç½® - **å·²å®ç°**
3. âœ… æ›´å¥½çš„æ—¥å¿— - **å·²å®ç°**

### æœªæ¥å¯ä»¥æ·»åŠ çš„åŠŸèƒ½ï¼ˆP2ï¼‰
1. â³ æ–‡ä»¶é€‰æ‹©åŠŸèƒ½
2. â³ æäº¤ä¿¡æ¯æ¨¡æ¿
3. â³ AIç”Ÿæˆæäº¤ä¿¡æ¯
4. â³ æäº¤å‰æ£€æŸ¥

## ğŸ’¡ å»ºè®®

### ç«‹å³è¡ŒåŠ¨
1. **éƒ¨ç½²æ–°ç‰ˆæœ¬** - ä¿®å¤ä¸¥é‡é—®é¢˜
2. **æµ‹è¯•å†²çªåœºæ™¯** - ç¡®ä¿æ­£ç¡®å¤„ç†
3. **æ›´æ–°æ–‡æ¡£** - å‘ŠçŸ¥ç”¨æˆ·æ–°åŠŸèƒ½

### åç»­ä¼˜åŒ–
1. æ·»åŠ æ–‡ä»¶é€‰æ‹©åŠŸèƒ½
2. å®ç°æäº¤ä¿¡æ¯æ¨¡æ¿
3. é›†æˆä»£ç æ£€æŸ¥å·¥å…·

---

**æ€»ç»“**: åŸæµç¨‹å­˜åœ¨ä¸¥é‡çš„è®¾è®¡ç¼ºé™·ï¼Œæ–°æµç¨‹å®Œå…¨è§£å†³äº†è¿™äº›é—®é¢˜ï¼Œå¼ºçƒˆå»ºè®®ç«‹å³éƒ¨ç½²ã€‚
