# 文件路径显示优化说明

## 问题描述
在项目提交详情页面（project-manager/11/commit）的变更文件列表中，当文件的目录层级过深时，原有的单行显示方式会导致文件名被截断（`text-overflow: ellipsis`），用户无法看到完整的文件名，影响用户体验。

## 优化方案

### 1. 布局结构改进
- **原方案**：单行显示，文件路径和文件名混在一起
- **新方案**：采用双行显示结构
  - **第一行**：显示完整文件名（始终可见）
  - **第二行**：显示目录路径（辅助信息）

### 2. 视觉设计优化

#### 文件名显示（第一行）
```css
.file-name {
  font-size: 13px;
  color: #303133;
  font-weight: 500;
  word-break: break-all;  /* 允许换行，确保完整显示 */
  line-height: 1.4;
}
```
- ✅ 使用 `word-break: break-all` 确保文件名完整显示
- ✅ 增加字体粗细（500）突出文件名
- ✅ 适当的行高提升可读性

#### 路径显示（第二行）
```css
.file-path {
  font-size: 11px;
  color: #909399;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;  /* 路径过长时显示省略号 */
  opacity: 0.8;
}
```
- ✅ 较小字号区分主次信息
- ✅ 灰色显示降低视觉干扰
- ✅ 路径可以被截断（因为文件名是关键信息）

### 3. 交互体验增强

#### 鼠标悬停效果
- **路径透明度**：从 0.8 → 1.0，提升可读性
- **路径颜色**：从 #909399 → #606266，更加清晰
- **完整路径提示**：添加 `title` 属性显示完整路径

#### 选中状态
- 文件名颜色变为品牌色（#409eff）
- 路径颜色变为浅蓝色（#79bbff），保持色彩协调
- 左侧蓝色边框突出当前选中项

### 4. 用户体验优势

| 对比项 | 优化前 | 优化后 |
|--------|--------|--------|
| 文件名可见性 | ❌ 可能被截断 | ✅ 始终完整显示 |
| 路径信息 | ❌ 混在一起难以区分 | ✅ 分层显示清晰明了 |
| 空间利用 | ⚠️ 单行受限 | ✅ 双行自适应高度 |
| 悬停提示 | ✅ 有title提示 | ✅ 增强视觉反馈 |
| 长文件名处理 | ❌ 直接截断 | ✅ 自动换行 |

## 技术实现

### HTML结构
```vue
<div class="file-node" :title="node.path">
  <el-icon class="file-icon">
    <Document />
  </el-icon>
  <div class="file-info">
    <span class="file-name">{{ node.name }}</span>
    <span class="file-path" v-if="hasPath">{{ getDirectoryPath }}</span>
  </div>
  <div class="file-stats">
    <span class="add-stat">+{{ node.stats?.additions || 0 }}</span>
    <span class="delete-stat">-{{ node.stats?.deletions || 0 }}</span>
  </div>
</div>
```

### 计算属性
```typescript
// 判断是否有路径（多级目录）
const hasPath = computed(() => {
  return props.node.path.includes('/')
})

// 获取目录路径（不包含文件名）
const getDirectoryPath = computed(() => {
  if (!hasPath.value) return ''
  const parts = props.node.path.split('/')
  return parts.slice(0, -1).join('/')
})
```

## 应用场景
- ✅ 深层目录结构的项目
- ✅ 长文件名的情况
- ✅ 需要快速定位文件的场景
- ✅ 提交记录查看和代码审查

## 兼容性说明
- 保持原有的树形结构展开/折叠功能
- 统计信息（+/- 行数）位置不变
- 选中交互逻辑保持一致
- 响应式设计自适应不同屏幕尺寸
